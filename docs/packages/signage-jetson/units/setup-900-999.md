# setup(900-999)

## **900_extlinux.sh**

Jetson の `extlinux.conf` に静音化パラメータを付与します（Pi はスキップ）。

---

## **910_raspi_splash.sh**

Raspberry Pi の起動見た目を静音化します。

---

## **950_auto_x.sh**

`tty1` 自動ログイン → `startx` → Openbox + Chromium の **キオスク起動**を構成します。  
Chromium は `http://127.0.0.1:3000/welcome.html` を表示し、`/tmp/UPDATING` が存在する間は起動を抑止します。

---

## **960_setup_pulse.sh**

HDMI を既定の音声出力に設定します（Jetson / Pi で sink 名を切替）。

---

## **964_pi_bootloader_power_cfg.sh**

Raspberry Pi の EEPROM 設定で `POWER_OFF_ON_HALT=1` と `WAKE_ON_GPIO=1` を有効化します。

---

## **967_install_pi_poweroff_service.sh**

Raspberry Pi 向けの **電源断ヘルパー**を配置します。  
このユニットは **GPIO 固有の処理は行わず**、`systemctl start pi-poweroff.service` で `pi_power_off.py` を実行するだけです。

---

## **980_sudo_power.sh**

`/etc/sudoers.d/${USERNAME}-power` と `${USERNAME}-rotate` を作成し、
`poweroff` / `reboot` / `sed` / `pkill` を NOPASSWD で許可します。

---

## **981_sudo_signage_update.sh**

`signage-update.service` の start/stop/restart を NOPASSWD で許可します。

---

## **982_sudo_wifi_reset.sh**

`wpa_cli` / `chmod` / `reboot` を NOPASSWD で許可します。

---

## **999_patch_mig_marker.sh**

- `PATCH_DIR` の **最新パッチ名**を `PATCH_MARK` に記録
- `/opt/signage-core/signage-migrations/` に **migrations の `.done` を初期生成**

`999_patch_marker.sh` から **`999_patch_mig_marker.sh`** に名称変更されています。
